<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
<!--    <link href="{{url_for('static',filename='css/admin.css')}}"rel="stylesheet">-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Acme|Yeseva+One&display=swap" rel="stylesheet">

<!--	FONTS   -->
	<link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
	<link href="https://fonts.googleapis.com/css?family=Abril+Fatface|Asap&display=swap" rel="stylesheet">

	<title>Admin</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">	<title>Admin</title>
<style>
    *{
            padding: 0;
            margin: auto 0;
            box-sizing: border-box;
            text-align: center;
            font-family: 'Open Sans', sans-serif !important;
        }
        body{
            background:url(../static/images/banner2.jpg) no-repeat center;
            background-size: cover;
            background-attachment: fixed;
        }
        table{
            align-self: center;
            border-collapse: collapse;
            border: 3px solid gray;
            border-radius: 5px;
        }
        h1{
            color:white;
            font-family: 'Yeseva One', cursive;
        }
        th,tbody{
            color:white;
            font-family: 'Acme', sans-serif;
        }
        .nav-link{
			cursor: pointer;
		}
</style>
</head>
<body>

<!-- Navigation -->
<nav class="navbar navbar-expand-md sticky-top">
	<div class="container">
        <a class="navbar-brand" id="brand"><img id="myLogo" style="max-height:2em;" src="{{url_for('static',filename='images/logo.png')}}">   MovieTime</a>
		<button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">Menu
			<i class="fa fa-bars"></i>
        </button>
		<div class="collapse navbar-collapse text-center" id="navbarResponsive">
			<ul class="navbar-nav ml-auto text-uppercase">
<!--				<li class="nav-item">-->
<!--					<a class="nav-link" style="color: #fff;" onclick="allMov()">All Movies</a>-->
<!--				</li>-->
<!--				<li class="nav-item">-->
<!--					<a class="nav-link" style="color: #fff;" onclick="myTic()">My Tickets</a>-->
<!--				</li>-->
				<li class="nav-item">
					<a class="nav-link" style="color: #fff;" onclick="signOut()">Sign Out</a>
				</li>
			</ul>
		</div>
    </div>
</nav>

<style>
	.navbar {
		padding-top: 1.6em;
		padding-bottom: 1.6em;
		-webkit-transition: padding-top .3s,padding-bottom .3s;
		-moz-transition: padding-top .3s,padding-bottom .3s;
		transition: padding-top .3s,padding-bottom .3s;
		border: none;
		max-width: 100vw;
		transition: background-color 1s ease 0s;

	  background-color: black;
	  transition: background-color 1s ease 0s;
	  box-shadow: 0 0 4px grey;
	  max-width: 100vw;
	}
	#brand{
		color:#fed136 ;
		font-family: 'Kaushan Script','Helvetica Neue',Helvetica,Arial,cursive;
		font-size: 1.75em;
	}
	a.nav-link  {
    	color: #fed136;
	}
</style>

<div>
    <br><br>
<!--  Show	-->
    <button type="button" class="btn btn-info" data-toggle="collapse" data-target="#shows" style="width: 20%; font-size: 20px;">Shows</button>
    <div id="shows" class="collapse">
        <h1>Shows Data</h1>
        <table border="2" class="table table-striped table-dark">
        <thead>
        <tr>
            <th>ShowID</th>
            <th>Screen</th>
            <th>TimeStamp</th>
            <th>Cost</th>
            <th>MovieID</th>
            <th>Tickets</th>
        </tr>
        </thead>
        <tbody>
            {% for row in show %}
                <tr>
                    <td>{{row[0]}}</td>
                    <td>{{row[1]}}</td>
                    <td>{{row[2]}}</td>
                    <td>{{row[3]}}</td>
                    <td>{{row[4]}}</td>
                    <td>{{row[5]}}</td>
                </tr>
            {% endfor %}
        </tbody>
        </table>
        <div class="container center">
            <form style="width: 30%;margin-left: 35%"  method="POST" autocomplete="off">
            <div class="input-group">
            <input type="text" class="form-control" name="showid" id="showid" placeholder="Show ID">
            </div>
            <div class="input-group">
            <input type="text" class="form-control" name="screen" id="screen" placeholder="Screen">
            </div>
            <div class="input-group">
            <input type="number" class="form-control" name="cost" id="cost" placeholder="Cost">
            </div>
            <div class="input-group">
            <input type="text" class="form-control" name="time" id="time" placeholder="Time">
            </div>
            <div class="input-group">
            <input type="text" class="form-control" name="movieid" id="movieid" placeholder="Movie ID">
            </div>
            <br>
            <button type="button" onclick="inShow()">Submit</button>
            <br>
            <p id="SHOWstatus" style="color: #fff"></p>
        </form>
        </div>
    </div>
	<br><br><br>

<!--  Tickets	-->
    <button type="button" class="btn btn-info" data-toggle="collapse" data-target="#tickets" style="width: 20%; font-size: 20px;">Tickets</button>
    <div id="tickets" class="collapse">
        <h1>Tickets Data</h1>
        <table border="2" class="table table-striped table-dark">
        <thead>
        <tr>
            <th>TicketID</th>
            <th>TimeStamp</th>
            <th>SeatNumber</th>
            <th>ShowID</th>
            <th>UserID</th>
        </tr>
        </thead>
        <tbody>
            {% for row in ticket %}
                <tr>
                    <td>{{row[0]}}</td>
                    <td>{{row[1]}}</td>
                    <td>{{row[2]}}</td>
                    <td>{{row[3]}}</td>
                    <td>{{row[4]}}</td>
                </tr>
            {% endfor %}
        </tbody>
        </table>
    </div>
	<br><br><br>
<!--  Clients	-->
    <button type="button" class="btn btn-info" data-toggle="collapse" data-target="#clients" style="width: 20%; font-size: 20px;">Clients</button>
    <div id="clients" class="collapse">
        <h1>Clients Data</h1>
        <table border="2" class="table table-striped table-dark">
        <thead>
        <tr>
            <th>UserID</th>
            <th>Password</th>
            <th>Credential</th>
            <th>Email</th>
        </tr>
        </thead>
        <tbody>
            {% for row in clients %}
                <tr>
                    <td>{{row[0]}}</td>
                    <td>{{row[1]}}</td>
                    <td>{{row[2]}}</td>
                    <td>{{row[3]}}</td>
                </tr>
            {% endfor %}
        </tbody>
        </table>
    </div>
<br><br><br>
<!--  Movie	-->
    <button type="button" class="btn btn-info" data-toggle="collapse" data-target="#movie" style="width: 20%; font-size: 20px;">Movies</button>
    <div id="movie" class="collapse">
        <h1>Movies Data</h1>
        <table border="2" class="table table-striped table-dark">
        <thead>
        <tr>
            <th>MovieID</th>
            <th>Movie</th>
        </tr>
        </thead>
        <tbody>
            {% for row in movies %}
                <tr>
                    <td>{{row[0]}}</td>
                    <td>{{row[1]}}</td>
                </tr>
            {% endfor %}
        </tbody>
        </table>
        <div class="container col-xs-1 text-center" style="align-content: center;">
            <form style="width: 30%;margin-left: 35%" method="POST" autocomplete="off">
            <div class="input-group">
            <input type="text" class="form-control" name="mid" id="mid" placeholder="Movie ID">
            </div>
            <div class="input-group">
            <input type="text" class="form-control" name="movie_name" id="movie_name" placeholder="Movie">
            </div>
            <br>
            <button type="button" onclick="inMov()">Submit</button>
            <br>
            <p id="MOVstatus" style="color: #fff"></p>
        </form>
        </div>
    </div>
    <br><br>
</div>
<script>
    function check(itr){
        var index = 0;
        while (index < itr.length) {
            console.log(itr[index]);
            if(document.getElementById(itr[index]).value == "" || document.getElementById(itr[index]).value == null){
                return false;
            }
            index++;
        }
        return true;
    }

    function inMov(){
        var ids = ["mid","movie_name"];
        if(!check(ids)){
            document.getElementById("MOVstatus").innerHTML = "Please fill all values";
        }else{
            document.getElementById("MOVstatus").innerHTML = "Processing";
            var DATA = document.getElementById("mid").value +' '+ document.getElementById("movie_name").value;
            $.ajax({
                url: '/insert_movie',
                type: 'POST',
                data: DATA,
                success: function(response){
                    console.log(response);
                    if(response == "1"){
                        document.getElementById("MOVstatus").innerHTML = "Refreshing";
                        location.reload();
                    }else if(response == "2"){
                        document.getElementById("MOVstatus").innerHTML = "Error";
                    }
                }
            })
        }
    }

    function inShow(){
        var ids = ["showid","screen","cost","time","movieid"];
        if(!check(ids)){
            document.getElementById("SHOWstatus").innerHTML = "Please fill all values";
        }else{
            document.getElementById("SHOWstatus").innerHTML = "Processing"
            var DATA = document.getElementById("showid").value+' '+document.getElementById("screen").value+' '+document.getElementById("cost").value+' '+document.getElementById("time").value+' '+document.getElementById("movieid").value;
            $.ajax({
                url: '/insert_show',
                type: 'POST',
                data: DATA,
                success: function(response){
                    console.log(response);
                    if(response == "1"){
                        document.getElementById("SHOWstatus").innerHTML = "Refreshing";
                        location.reload();
                    }else if(response == "2"){
                        document.getElementById("SHOWstatus").innerHTML = "Error";
                    }
                }
            })
        }
    }

    function signOut() {
		document.cookie = "user =;";
		document.cookie = "pass =;";
		window.location = "{{url_for('login')}}";
	}
</script>
</body>
</html>